{"ast":null,"code":"import _classCallCheck from \"/Users/yuukan/Documents/Projects/control-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yuukan/Documents/Projects/control-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yuukan/Documents/Projects/control-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yuukan/Documents/Projects/control-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yuukan/Documents/Projects/control-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/yuukan/Documents/Projects/control-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/yuukan/Documents/Projects/control-react/src/components/Landing.js\";\nimport React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport swal from 'sweetalert';\n\nvar Landing = /*#__PURE__*/function (_Component) {\n  _inherits(Landing, _Component);\n\n  function Landing() {\n    var _this;\n\n    _classCallCheck(this, Landing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Landing).call(this));\n    _this.login = _this.login.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      email: false\n    };\n    _this.email = React.createRef();\n    _this.password = React.createRef();\n    return _this;\n  } //####################################Login####################################\n\n\n  _createClass(Landing, [{\n    key: \"login\",\n    value: function login(e) {\n      e.preventDefault(); // this.props.changeLogged(true);\n\n      var this_ = this;\n      var email = this.email.current.value;\n      var password = this.password.current.value;\n      axios.post(this.props.url + \"api/login\", {\n        email: email,\n        password: password\n      }).then(function (response) {\n        if (response.data.error === 0) {\n          localStorage.setItem(\"tp_uid\", response.data.id);\n          this_.props.setUserPermissions(response.data.permissions.split(\",\"));\n          localStorage.setItem(\"tp_uid_per\", response.data.permissions.split(\",\"));\n          this_.props.changeLogged(true);\n        } else {\n          swal(\"Error\", response.data.message, \"error\");\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    } //####################################Login####################################\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"landing\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }\n      }, this.props.logged ? /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/order-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 42\n        }\n      }) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n        className: \"splash\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"images/logo.png\",\n        alt: \"Logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"email-form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.login,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        autoFocus: true,\n        placeholder: \"Email\",\n        required: true,\n        ref: this.email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Contrase\\xF1a\",\n        required: true,\n        ref: this.password,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"gohome\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: \"sign-in\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 33\n        }\n      }, \"Ingresar\"))))));\n    }\n  }]);\n\n  return Landing;\n}(Component);\n\nexport default Landing;","map":{"version":3,"sources":["/Users/yuukan/Documents/Projects/control-react/src/components/Landing.js"],"names":["React","Component","FontAwesomeIcon","Redirect","axios","swal","Landing","login","bind","state","email","createRef","password","e","preventDefault","this_","current","value","post","props","url","then","response","data","error","localStorage","setItem","id","setUserPermissions","permissions","split","changeLogged","message","catch","console","log","logged"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Redirect } from 'react-router'\nimport axios from 'axios';\nimport swal from 'sweetalert';\n\nclass Landing extends Component {\n\n    constructor() {\n        super();\n        this.login = this.login.bind(this);\n        this.state = {\n            email: false\n        };\n        this.email = React.createRef();\n        this.password = React.createRef();\n    }\n\n    //####################################Login####################################\n    login(e) {\n        e.preventDefault();\n        // this.props.changeLogged(true);\n\n        let this_ = this;\n        let email = this.email.current.value;\n        let password = this.password.current.value;\n\n        axios.post(this.props.url + \"api/login\", {\n            email,\n            password\n        })\n            .then(function (response) {\n                if (response.data.error === 0) {\n                    localStorage.setItem(\"tp_uid\", response.data.id);\n                    this_.props.setUserPermissions(response.data.permissions.split(\",\"));\n                    localStorage.setItem(\"tp_uid_per\", response.data.permissions.split(\",\"));\n                    this_.props.changeLogged(true);\n                } else {\n                    swal(\"Error\", response.data.message, \"error\");\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n    //####################################Login####################################\n\n    render() {\n        return (\n            <div className=\"landing\">\n                {\n                    this.props.logged ? (<Redirect to=\"/order-list\" />) : \"\"\n                }\n                <div className=\"splash\">\n                    <img src=\"images/logo.png\" alt=\"Logo\" />\n                    <div className=\"email-form\">\n                        <form onSubmit={this.login}>\n                            <input type=\"text\" autoFocus placeholder=\"Email\" required ref={this.email} />\n                            <input type=\"password\" placeholder=\"Contraseña\" required ref={this.password} />\n                            <button type=\"submit\" className=\"gohome\">\n                                <FontAwesomeIcon icon=\"sign-in\" />\n                                <span>\n                                    Ingresar\n                                </span>\n                            </button>\n                        </form>\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}\nexport default Landing;"]},"metadata":{},"sourceType":"module"}